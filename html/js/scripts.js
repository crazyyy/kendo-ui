function KendoMapDraw(e,t,a){$.getJSON(workUri.replace("cordCenter",e),function(e,r){var n=[];if("success"!==r)return alert("Request to Foursquare failed");for(var o=0;o<e.response.venues.length;o++){var c=e.response.venues[o];n.push({name:c.name,latlng:[c.location.lat,c.location.lng]})}var l=new kendo.data.DataSource({data:n});$("#map").kendoMap({center:[parseFloat(t),parseFloat(a)],zoom:14,layers:[{type:"tile",urlTemplate:"http://#= subdomain #.tile2.opencyclemap.org/transport/#= zoom #/#= x #/#= y #.png",subdomains:["a","b","c"],attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap contributors</a>.Tiles courtesy of <a href="http://www.opencyclemap.org/">Andy Allan</a>'},{type:"marker",dataSource:l,locationField:"latlng",titleField:"name"}],click:onClick})})}function onClick(e){var t=parseFloat(e.location.lat),a=parseFloat(e.location.lng),r=t+","+a;KendoMapDraw(r,t,a)}function SearchCity(){var e=$("city"),t=new google.maps.places.Autocomplete(e);google.maps.event.addListener(t,"place_changed",function(){var e=t.getPlace(),a=e.geometry.location.lat(),r=e.geometry.location.lng(),n=a+","+r;KendoMapDraw(n,a,r)})}function DrawMarkers(){KendoMapDraw(cordCenter,centerLat,centerLng)}var clientId="2TVA3RGPADXOJJPZY4VBRWZPJ0GNBLLKLMGEL1VTARBDJ1TV",clientSecret="FK40OEGZ1ODV1GM1C0SYMB3QYN5LYECMJ0L0JGJWRXAB5WQS",centerLat="49.239700299999996",centerLng="28.4986431",cordCenter=centerLat+","+centerLng,workUri="https://api.foursquare.com/v2/venues/search?client_id="+clientId+"&client_secret="+clientSecret+"&v=20150717&ll=cordCenter&query=ресторан&callback=?";$(document).ready(DrawMarkers),$(document).ready(SearchCity);