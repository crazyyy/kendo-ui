function KendoMapDraw(e,t,o,n){$("#map").kendoMap({center:[parseFloat(o),parseFloat(n)],zoom:14,layers:[{type:"tile",urlTemplate:"http://#= subdomain #.tile2.opencyclemap.org/transport/#= zoom #/#= x #/#= y #.png",subdomains:["a","b","c"],attribution:'&copy; <a href="http://osm.org/copyright">OpenStreetMap contributors</a>.Tiles courtesy of <a href="http://www.opencyclemap.org/">Andy Allan</a>'},{type:"marker",dataSource:t,locationField:"latlng",titleField:"name"}],click:onClick})}function onClick(e){var t=parseFloat(e.location.lat),o=parseFloat(e.location.lng),n=t+","+o;$.getJSON(workUri.replace("cordCenter",n),function(e,r){var a=[];if("success"!==r)return alert("Request to Foursquare failed");for(var c=0;c<e.response.venues.length;c++){var l=e.response.venues[c];a.push({name:l.name,latlng:[l.location.lat,l.location.lng]})}var s=new kendo.data.DataSource({data:a});KendoMapDraw(n,s,t,o)})}function DrawMarkers(){$.getJSON(workUri.replace("cordCenter",cordCenter),function(e,t){var o=[];if("success"!==t)return alert("Request to Foursquare failed");for(var n=0;n<e.response.venues.length;n++){var r=e.response.venues[n];o.push({name:r.name,latlng:[r.location.lat,r.location.lng]})}var a=new kendo.data.DataSource({data:o});KendoMapDraw(cordCenter,a,centerLat,centerLng)})}function GetCurrentPosition(){function e(e){var t=e.coords;console.log("Latitude : "+t.latitude),console.log("Longitude: "+t.longitude),console.log("More or less "+t.accuracy+" meters.")}function t(e){console.warn("ERROR("+e.code+"): "+e.message)}var o={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};navigator.geolocation.getCurrentPosition(e,t,o)}var clientId="2TVA3RGPADXOJJPZY4VBRWZPJ0GNBLLKLMGEL1VTARBDJ1TV",clientSecret="FK40OEGZ1ODV1GM1C0SYMB3QYN5LYECMJ0L0JGJWRXAB5WQS",centerLat="49.239700299999996",centerLng="28.4986431",cordCenter=centerLat+","+centerLng,workUri="https://api.foursquare.com/v2/venues/search?client_id="+clientId+"&client_secret="+clientSecret+"&v=20150717&ll=cordCenter&query=ресторан&callback=?";console.log(centerLat),console.log(centerLng),console.log(parseFloat(centerLat)),console.log(parseFloat(centerLng)),$(document).ready(GetCurrentPosition),$(document).ready(DrawMarkers);